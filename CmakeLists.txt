CMAKE_MINIMUM_REQUIRED(VERSION 3.12.0 FATAL_ERROR)

SET(PROJECT_NAME FXG)
PROJECT(${PROJECT_NAME})

SET(FXG_ROOT_DIR ${CMAKE_CURRENT_SOURCE_DIR})
SET(BUILD_SHARED_LIBS TRUE)
SET(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${FXG_ROOT_DIR}/bin)
SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${FXG_ROOT_DIR}/bin)

SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /utf-8")
SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} /utf-8")

SET_PROPERTY(GLOBAL PROPERTY USE_FOLDERS ON)

ADD_DEFINITIONS(-DFXG_ROOT_DIR="${FXG_ROOT_DIR}")

FIND_PACKAGE(OpenGL REQUIRED)

IF(NOT OpenGL_FOUND)
    MESSAGE(FATAL_ERROR "Can not find OpenGL.")
ENDIF()

IF(CMAKE_HOST_SYSTEM_NAME STREQUAL "Windows")
    SET(CMAKE_WINDOWS_EXPORT_ALL_SYMBOLS TRUE)
    SET(CMAKE_EXE_LINKER_FLAGS_RELEASE "${CMAKE_EXE_LINKER_FLAGS_RELEASE} /SUBSYSTEM:WINDOWS /ENTRY:mainCRTStartup")
ENDIF()

IF(CMAKE_CXX_COMPILER_ID STREQUAL "MSVC" AND CMAKE_C_COMPILER_ID STREQUAL "MSVC")
    SET_PROPERTY(DIRECTORY ${FXG_ROOT_DIR} PROPERTY VS_STARTUP_PROJECT FXMain)
ENDIF()

ADD_SUBDIRECTORY(thirdparty)
ADD_SUBDIRECTORY(FXMath)
ADD_SUBDIRECTORY(FXBasic)
ADD_SUBDIRECTORY(FXGraphics)
ADD_SUBDIRECTORY(FXMain)
