CMAKE_MINIMUM_REQUIRED(VERSION 3.12.0 FATAL_ERROR)

IF(NOT DEFINED FXG_ROOT_DIR)
    MESSAGE(FATAL_ERROR "The project should be built from the top-level directory.")
ENDIF()

SET(PROJECT_NAME FXGraphics)
PROJECT(${PROJECT_NAME})

SET(INCLUDE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/include)
SET(SRC_PATH ${CMAKE_CURRENT_SOURCE_DIR}/src)
SET(THIRDPARTY_PATH ${FXG_ROOT_DIR}/thirdparty)
SET(RESOURCE_PATH ${FXG_ROOT_DIR}/resources)

SET(INCLUDE_LIST
    ${INCLUDE_PATH}/graphics_instance.h
    ${INCLUDE_PATH}/graphics_window.h
    ${INCLUDE_PATH}/graphics_gpu_item.h
    ${INCLUDE_PATH}/graphics_buffer.h
    ${INCLUDE_PATH}/graphics_scene.h
    ${INCLUDE_PATH}/graphics_entity.h
    ${INCLUDE_PATH}/graphics_entity_group.h
    ${INCLUDE_PATH}/graphics_diverter.h
)

SOURCE_GROUP(include FILES
    ${INCLUDE_LIST}
)

SET(SRC_LIST
    ${SRC_PATH}/graphics_instance.cpp
    ${SRC_PATH}/graphics_window.cpp
    ${SRC_PATH}/graphics_gpu_item.cpp
    ${SRC_PATH}/graphics_buffer.cpp
    ${SRC_PATH}/graphics_scene.cpp
    ${SRC_PATH}/graphics_entity.cpp
    ${SRC_PATH}/graphics_entity_group.cpp
    ${SRC_PATH}/graphics_diverter.cpp
)

SOURCE_GROUP(src FILES
    ${SRC_LIST}
)

SET(RESOURCE_LIST
)

SOURCE_GROUP(resource FILES
    ${RESOURCE_LIST}
)

ADD_LIBRARY(${PROJECT_NAME}
    ${INCLUDE_LIST}
    ${SRC_LIST}
    ${RESOURCE_LIST}
)

TARGET_INCLUDE_DIRECTORIES(${PROJECT_NAME} PRIVATE
    ${INCLUDE_PATH}
    ${THIRDPARTY_PATH}/glad/include
    ${THIRDPARTY_PATH}/glfw/include/GLFW
    ${FXG_ROOT_DIR}/FXMath/include
    ${FXG_ROOT_DIR}/FXBasic/include
)

TARGET_LINK_DIRECTORIES(${PROJECT_NAME} PRIVATE
    ${THIRDPARTY_PATH}/glad/include
    ${THIRDPARTY_PATH}/glfw/include/GLFW
    ${FXG_ROOT_DIR}/FXMath/include
    ${FXG_ROOT_DIR}/FXBasic/include
)

TARGET_LINK_LIBRARIES(${PROJECT_NAME}
    glad
    glfw
    FXMath
    FXBasic
)
